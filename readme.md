# Twitter AI Reporter

ä¸€ä¸ªä¸“ä¸šçš„ Twitter/X.com æ™ºèƒ½åˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆç³»ç»Ÿï¼Œé›†æˆæ¨æ–‡é‡‡é›†ã€AI åˆ†æå’Œè‡ªåŠ¨åŒ–æŠ¥å‘ŠåŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æ¨æ–‡çˆ¬å–**: è‡ªåŠ¨çˆ¬å–æŒ‡å®šåˆ—è¡¨çš„æ¨æ–‡æ•°æ®
- ğŸ¤– **AI æ™ºèƒ½åˆ†æ**: ä½¿ç”¨ç¡…åŸºæµåŠ¨APIåˆ†ææ¨æ–‡å†…å®¹
- ğŸ“Š **è‡ªåŠ¨æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆç»“æ„åŒ–çš„ç§‘æŠ€èµ„è®¯ç®€æŠ¥
- ğŸ” **å®‰å…¨è®¤è¯**: æ”¯æŒ Cookie è®¤è¯å’Œç¯å¢ƒå˜é‡é…ç½®
- ğŸ’¾ **æ•°æ®å­˜å‚¨**: é›†æˆ Supabase æ•°æ®åº“å­˜å‚¨
- ğŸ”„ **æ•°æ®å»é‡**: æ™ºèƒ½å»é‡æœºåˆ¶é¿å…é‡å¤æ•°æ®
- ğŸŒ **ä»£ç†æ”¯æŒ**: æ”¯æŒHTTPä»£ç†é…ç½®

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
pnpm install
```

### 2. ç¯å¢ƒé…ç½®

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶é…ç½®ï¼š

```bash
cp .env.example .env
```

#### å¿…éœ€é…ç½®

**Supabase æ•°æ®åº“é…ç½®**
```bash
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
```

**AI æœåŠ¡é…ç½®**
```bash
SILICONFLOW_API_KEY=your_siliconflow_api_key
```

#### å¯é€‰é…ç½®

**X.com ç™»å½•å‡­æ®**ï¼ˆç”¨äºæ¨æ–‡çˆ¬å–ï¼‰
```bash
X_USERNAME=your_x_username
X_PASSWORD=your_x_password
X_EMAIL=your_x_email
```

**Clashä»£ç†é…ç½®**ï¼ˆå¦‚éœ€è¦ï¼‰
```bash
PROXY_HOST=127.0.0.1
PROXY_PORT=7890
```

**æµè§ˆå™¨é…ç½®**
```bash
# Chrome/Chromium å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
# æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆmacOSï¼‰
CHROME_EXECUTABLE_PATH=/Applications/Google Chrome.app/Contents/MacOS/Google Chrome

# Dockerç¯å¢ƒæˆ–Linux
CHROME_EXECUTABLE_PATH=/usr/bin/chromium-browser

# å…¶ä»–Linuxç¯å¢ƒ
CHROME_EXECUTABLE_PATH=/usr/bin/google-chrome
```

### 3. å¯åŠ¨æœåŠ¡

#### æœ¬åœ°è¿è¡Œ

```bash
# æ¨æ–‡çˆ¬å–æœåŠ¡
node scripts/crawl-tweets.js

# AI ç®€æŠ¥ç”ŸæˆæœåŠ¡
node scripts/generate-report.js

# æ›´æ–°ç™»å½•cookies
node scripts/update-cookies.js
```

#### Docker éƒ¨ç½²

**å‰ç½®è¦æ±‚**
- ç¡®ä¿å·²å®‰è£… Docker å’Œ Docker Compose
- ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•ä¸‹å­˜åœ¨å¿…è¦çš„ç›®å½•ç»“æ„

**éƒ¨ç½²æ­¥éª¤**

1. åˆ›å»ºå¿…è¦çš„ç›®å½•ï¼š
```bash
# åˆ›å»ºæ—¥å¿—å’ŒæŠ¥å‘Šç›®å½•
mkdir -p logs reports

# ç¡®ä¿ cookies.json æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰
touch cookies.json
```

2. æ„å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼š
```bash
# æ„å»ºé•œåƒ
docker compose build

# å¯åŠ¨æœåŠ¡
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f
```

3. åœæ­¢æœåŠ¡ï¼š
```bash
docker compose down
```

**é‡è¦è¯´æ˜**
- docker-compose.yml ä½¿ç”¨ç›¸å¯¹è·¯å¾„è¿›è¡Œå·æŒ‚è½½ï¼Œç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
- æ—¥å¿—æ–‡ä»¶å°†ä¿å­˜åœ¨ `./logs` ç›®å½•ä¸­
- ç”Ÿæˆçš„æŠ¥å‘Šå°†ä¿å­˜åœ¨ `./reports` ç›®å½•ä¸­
- cookies.json æ–‡ä»¶ç”¨äºä¿æŒç™»å½•çŠ¶æ€çš„æŒä¹…åŒ–

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ scripts/                 # æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ crawl-tweets.js     # æ¨æ–‡çˆ¬å–è„šæœ¬
â”‚   â”œâ”€â”€ generate-report.js  # AIç®€æŠ¥ç”Ÿæˆè„šæœ¬
â”‚   â””â”€â”€ update-cookies.js   # Cookieæ›´æ–°è„šæœ¬
â”œâ”€â”€ src/                    # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”œâ”€â”€ services/          # æœåŠ¡æ¨¡å—
â”‚   â””â”€â”€ data/              # æ•°æ®å¤„ç†
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

## ğŸ¤– AI ç®€æŠ¥åŠŸèƒ½

### åŠŸèƒ½è¯´æ˜
- è‡ªåŠ¨åˆ†ææ¨æ–‡å†…å®¹ï¼Œç”Ÿæˆç§‘æŠ€èµ„è®¯ç®€æŠ¥
- æ”¯æŒå¤šç§AIæ¨¡å‹ï¼ˆç¡…åŸºæµåŠ¨å¹³å°ï¼‰
- ç”Ÿæˆç»“æ„åŒ–çš„åˆ†ææŠ¥å‘Š
- æ”¯æŒæ‰¹é‡å¤„ç†å’Œå¢é‡æ›´æ–°

### ä½¿ç”¨æ–¹æ³•
```bash
# ç”ŸæˆAIç®€æŠ¥
node scripts/generate-report.js

# æˆ–ä½¿ç”¨npmè„šæœ¬
npm run generate-report
```

### é…ç½®è¦æ±‚
- éœ€è¦é…ç½® `SILICONFLOW_API_KEY`
- ç¡®ä¿Supabaseæ•°æ®åº“è¿æ¥æ­£å¸¸
- æ¨æ–‡æ•°æ®è¡¨ä¸­éœ€è¦æœ‰å¾…åˆ†æçš„æ•°æ®

## ğŸš€ ä¸»è¦è„šæœ¬

```bash
# æ¨æ–‡çˆ¬å–
node scripts/crawl-tweets.js    # çˆ¬å–æ¨æ–‡æ•°æ®

# AI ç®€æŠ¥ç”Ÿæˆ
node scripts/generate-report.js # ç”ŸæˆAIåˆ†æç®€æŠ¥
npm run generate-report         # æˆ–ä½¿ç”¨npmè„šæœ¬

# Cookie ç®¡ç†
node scripts/update-cookies.js  # æ›´æ–°ç™»å½•cookies
npm run login                   # æˆ–ä½¿ç”¨npmè„šæœ¬

# æµ‹è¯•å’Œè°ƒè¯•
npm run test-ai                 # æµ‹è¯•AIåŠŸèƒ½
npm run check-config            # æ£€æŸ¥é…ç½®
npm run debug-data-loss         # è°ƒè¯•æ•°æ®é—®é¢˜
```

## ğŸ”— ä¸»è¦æœåŠ¡

- `scripts/crawl-tweets.js` - X.com æ¨æ–‡çˆ¬å–æœåŠ¡ï¼Œæ”¯æŒæŒ‡å®šåˆ—è¡¨çˆ¬å–
- `scripts/generate-report.js` - AI ç®€æŠ¥ç”ŸæˆæœåŠ¡ï¼Œåˆ†ææ¨æ–‡ç”Ÿæˆç§‘æŠ€èµ„è®¯
- `scripts/update-cookies.js` - Cookie è®¤è¯æœåŠ¡ï¼Œç»´æŠ¤ç™»å½•çŠ¶æ€
- `src/lib/` - æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åº“ï¼ŒåŒ…å«é…ç½®ã€æ•°æ®åº“ã€å·¥å…·ç­‰
- `src/services/` - ä¸šåŠ¡æœåŠ¡æ¨¡å—ï¼ŒåŒ…å«æ¨æ–‡å¤„ç†ã€AIåˆ†æç­‰
- `src/data/` - æ•°æ®å¤„ç†æ¨¡å—ï¼Œè´Ÿè´£æ•°æ®æ¸…æ´—å’Œå­˜å‚¨

## â“ å¸¸è§é—®é¢˜

### ç¯å¢ƒé…ç½®é—®é¢˜

**Q: å¦‚ä½•è·å– Supabase é…ç½®ï¼Ÿ**
A: åœ¨ Supabase é¡¹ç›®è®¾ç½®ä¸­æ‰¾åˆ° API å¯†é’¥å’Œé¡¹ç›® URL

**Q: ç¡…åŸºæµåŠ¨ API å¯†é’¥åœ¨å“ªé‡Œè·å–ï¼Ÿ**
A: è®¿é—®ç¡…åŸºæµåŠ¨å®˜ç½‘æ³¨å†Œè´¦å·å¹¶è·å– API å¯†é’¥

**Q: Clashä»£ç†é…ç½®æ˜¯å¿…éœ€çš„å—ï¼Ÿ**
A: æ ¹æ®é¡¹ç›®è¦æ±‚å¿…é¡»ä½¿ç”¨ä»£ç†ï¼Œé…ç½®PROXY_HOSTå’ŒPROXY_PORTå³å¯ï¼Œæ— éœ€ç”¨æˆ·åå¯†ç 

### è¿è¡Œé—®é¢˜

**Q: æ¨æ–‡çˆ¬å–å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥ X.com ç™»å½•å‡­æ®æ˜¯å¦æ­£ç¡®ï¼Œcookies æ˜¯å¦è¿‡æœŸ

**Q: AI ç®€æŠ¥ç”Ÿæˆå¤±è´¥ï¼Ÿ**
A: ç¡®è®¤ SILICONFLOW_API_KEY é…ç½®æ­£ç¡®ï¼Œç½‘ç»œè¿æ¥æ­£å¸¸

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥ Supabase é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç½‘ç»œæ˜¯å¦å¯è¾¾

### æ•°æ®é—®é¢˜

**Q: å‡ºç°é‡å¤æ•°æ®æ€ä¹ˆåŠï¼Ÿ**
A: ç³»ç»Ÿæœ‰è‡ªåŠ¨å»é‡æœºåˆ¶ï¼Œå¦‚ä»æœ‰é—®é¢˜è¯·æ£€æŸ¥æ•°æ®åº“çº¦æŸ

**Q: æ¨æ–‡æ•°æ®ä¸¢å¤±ï¼Ÿ**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé”™è¯¯æ—¥å¿—ï¼Œç¡®è®¤çˆ¬å–è¿‡ç¨‹æ˜¯å¦æ­£å¸¸å®Œæˆ

### Docker éƒ¨ç½²é—®é¢˜

**Q: å‡ºç° "Bind mount failed: '/volume1/docker/twitter-ai-reporter/logs' does not exist" é”™è¯¯ï¼Ÿ**
A: è¿™æ˜¯å› ä¸ºä½¿ç”¨äº†é”™è¯¯çš„ç»å¯¹è·¯å¾„ã€‚è¯·ç¡®ä¿ï¼š
- åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ `docker compose` å‘½ä»¤
- ä½¿ç”¨æä¾›çš„ docker-compose.yml æ–‡ä»¶ï¼ˆå·²é…ç½®ç›¸å¯¹è·¯å¾„ï¼‰
- è¿è¡Œå‰å…ˆåˆ›å»ºå¿…è¦ç›®å½•ï¼š`mkdir -p logs reports`

**Q: Docker å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- ç¡®ä¿ Docker å’Œ Docker Compose å·²æ­£ç¡®å®‰è£…
- ç¡®ä¿ .env æ–‡ä»¶é…ç½®æ­£ç¡®
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
- æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š`docker compose logs`

**Q: å®¹å™¨å†…æ— æ³•è®¿é—®æŒ‚è½½çš„æ–‡ä»¶ï¼Ÿ**
A: æ£€æŸ¥æ–‡ä»¶æƒé™å’Œç›®å½•ç»“æ„ï¼š
- ç¡®ä¿ logsã€reports ç›®å½•å­˜åœ¨ä¸”å¯å†™
- æ£€æŸ¥ cookies.json æ–‡ä»¶æƒé™
- å¦‚åœ¨ Linux ç³»ç»Ÿä¸Šï¼Œå¯èƒ½éœ€è¦è°ƒæ•´æ–‡ä»¶æ‰€æœ‰è€…ï¼š`sudo chown -R 1000:1000 logs reports`

## ğŸ”§ æ•…éšœæ’é™¤

### é…ç½®æ£€æŸ¥
```bash
# æ£€æŸ¥ç¯å¢ƒé…ç½®
npm run check-config

# æµ‹è¯•æ•°æ®åº“è¿æ¥
node -e "require('./src/lib/supabase').testConnection()"
```

### æ—¥å¿—è°ƒè¯•
```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
NODE_ENV=development node scripts/crawl-tweets.js

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
DEBUG=* node scripts/generate-report.js
```

### æ•°æ®éªŒè¯
```bash
# è°ƒè¯•æ•°æ®ä¸¢å¤±é—®é¢˜
npm run debug-data-loss

# æµ‹è¯•AIåŠŸèƒ½
npm run test-ai
```

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose éƒ¨ç½²

é¡¹ç›®å·²é…ç½®å®Œæ•´çš„ Docker å®¹å™¨åŒ–æ”¯æŒï¼Œç‰¹åˆ«é€‚é…ç¾¤è¾‰ NAS ç¯å¢ƒã€‚

#### 1. å‡†å¤‡ç¯å¢ƒæ–‡ä»¶

ç¡®ä¿ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡ã€‚

#### 2. æ„å»ºå’Œå¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f twitter-ai-reporter
```

#### 3. ç¾¤è¾‰ NAS éƒ¨ç½²æŒ‡å—

**å‰ç½®è¦æ±‚ï¼š**
- ç¾¤è¾‰ NAS å·²å®‰è£… Docker å¥—ä»¶
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´å’Œå†…å­˜èµ„æº

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. **ä¸Šä¼ é¡¹ç›®æ–‡ä»¶**
   - å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°ç¾¤è¾‰ NAS
   - å»ºè®®æ”¾åœ¨ `/docker/twitter-ai-reporter/` ç›®å½•ä¸‹

2. **é…ç½®ç¯å¢ƒå˜é‡**
   - å¤åˆ¶ `.env.example` ä¸º `.env`
   - æ ¹æ®å®é™…æƒ…å†µé…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡

3. **è®¾ç½®æƒé™**
   ```bash
   # SSH è¿æ¥åˆ°ç¾¤è¾‰ NAS åæ‰§è¡Œ
   sudo chown -R 1000:1000 /docker/twitter-ai-reporter/
   ```

4. **å¯åŠ¨æœåŠ¡**
   ```bash
   cd /docker/twitter-ai-reporter/
   docker-compose up -d
   ```

#### 4. Docker é…ç½®è¯´æ˜

**èµ„æºé™åˆ¶ï¼š**
- å†…å­˜é™åˆ¶ï¼š1GBï¼ˆé¢„ç•™512MBï¼‰
- CPUé™åˆ¶ï¼š0.5æ ¸å¿ƒï¼ˆé¢„ç•™0.25æ ¸å¿ƒï¼‰

**æ•°æ®æŒä¹…åŒ–ï¼š**
- `./reports` - æŠ¥å‘Šè¾“å‡ºç›®å½•
- `./cookies.json` - ç™»å½•çŠ¶æ€æ–‡ä»¶
- `./logs` - æ—¥å¿—æ–‡ä»¶ç›®å½•
- `./.env` - ç¯å¢ƒé…ç½®æ–‡ä»¶

**ç½‘ç»œé…ç½®ï¼š**
- ä½¿ç”¨æ¡¥æ¥ç½‘ç»œæ¨¡å¼
- æ”¯æŒä»£ç†é…ç½®

#### 5. å¸¸ç”¨ Docker å‘½ä»¤

```bash
# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°æœåŠ¡
docker-compose pull
docker-compose up -d

# è¿›å…¥å®¹å™¨
docker-compose exec twitter-ai-reporter sh

# æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
docker stats twitter-ai-reporter
```

#### 6. æ•…éšœæ’é™¤

**å¸¸è§é—®é¢˜ï¼š**

- **æƒé™é—®é¢˜**ï¼šç¡®ä¿æ–‡ä»¶æƒé™è®¾ç½®ä¸º 1000:1000
- **å†…å­˜ä¸è¶³**ï¼šè°ƒæ•´ docker-compose.yml ä¸­çš„èµ„æºé™åˆ¶
- **ç½‘ç»œé—®é¢˜**ï¼šæ£€æŸ¥ä»£ç†é…ç½®å’Œé˜²ç«å¢™è®¾ç½®
- **å­˜å‚¨ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ç”¨äºæ—¥å¿—å’ŒæŠ¥å‘Š

**è°ƒè¯•å‘½ä»¤ï¼š**
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs --tail=100 twitter-ai-reporter

# æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶æ€
docker-compose ps

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose exec twitter-ai-reporter sh
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

- ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- å®šæœŸæ›´æ–° API å¯†é’¥å’Œç™»å½•å‡­æ®
- ä½¿ç”¨å¼ºå¯†ç å’ŒåŒå› ç´ è®¤è¯
- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ HTTPS
- å®šæœŸå¤‡ä»½æ•°æ®åº“æ•°æ®

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License